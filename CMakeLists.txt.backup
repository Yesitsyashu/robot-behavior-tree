# Minimum CMake version required
cmake_minimum_required(VERSION 3.10)

# Project name and version
project(RobotBehaviorTree VERSION 1.0)

# Set C++ standard to C++17 (modern C++)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Add compiler warnings for better code quality
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -Wextra")

# Find BehaviorTree.CPP package
# This searches for the installed library
find_package(BehaviorTreeV3 REQUIRED)

# Print status message
message(STATUS "===========================================")
message(STATUS "Building Robot Behavior Tree Project")
message(STATUS "C++ Standard: ${CMAKE_CXX_STANDARD}")
message(STATUS "BehaviorTree.CPP found!")
message(STATUS "===========================================")

# Create the executable from source file
add_executable(robot_behavior_tree 
    src/robot_behavior_tree.cpp
)

# Link the BehaviorTree library to our executable
target_link_libraries(robot_behavior_tree
    BT::behaviortree_cpp
)

# Set output directory for the executable
set_target_properties(robot_behavior_tree PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin
)

# Installation rules (optional)
install(TARGETS robot_behavior_tree
    RUNTIME DESTINATION bin
)